# TODO: Evolve this into a full script I can run on a fresh debian install.

# Absolute first packages needed
sudo apt install git python-is-python3 zsh

# Set up ssh key
ssh-keygen -t rsa -b 4096 -C "your_email@example.com"
# Add contents of id_ed25519.pub as key on GitHub and test:
ssh -T git@github.com

# Install oh-my-zsh
sh -c "$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"

#: zsh themes & plugins
git clone --depth=1 https://github.com/romkatv/powerlevel10k.git ${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/themes/powerlevel10k
git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions

mkdir src  # for git clones
mkdir bin
mkdir .local/share/fonts
mkdir .config/nvim

# ghar
# TODO: ghar add?
# TODO: add way to check all ghar repos for unpushed changes periodically
git clone https://github.com/philips/ghar.git src/ghar
git clone git@github.com/mjohnsonengr/dotfiles.git src/ghar/devel
src/ghar/bin/ghar install

fc-cache
zsh  # if not already open

# apt-get packages to install (alphabetical)
# NOTE: packages intentionally not installed:
#   haskell-platform: use ghcup instead
sudo apt update
sudo apt install \
  apt-transport-https \
  autojump \
  build-essential \
  clipit \
  curl \
  fzf \
  gnupg \
  mercurial \
  neovim \
  nodejs \
  openjdk-11-jdk \
  openjdk-11-jre \
  python3-pip \
  python3-neovim \
  python3-setuptools \
  snapd \
  tmux \
  tree \
  xclip

# upgrade npm
sudo npm install npm -g

# git-crecord
git clone https://github.com/andrewshadura/git-crecord.git src/git-crecord
cd src/git-crecord
./setup.py install

# Setup neovim
# I think this is required: python3 -m pip install --user virtualenv
# TODO: Make sure the below is correct (what is it installing it to?)
python3 -m pip install wheel neovim pylint
cd ~/.config/nvim
mkdir bundle
git clone https://github.com/VundleVim/Vundle.vim.git bundle/Vundle.vim
nvim -c 'PluginInstall'
# Not currently using this plugin
# cd ~/.config/nvim/bundle/LanguageClient-neovim
# ./install.sh

# Install Brave: brave.com/linux

# IntelliJ, PyCharm
snap install intellij-idea-community --classic
snap install pycharm-community --classic

## Solarized everywhere
gnome-terminal: Profile Preferences # TODO: While here, fix other stuff?
gedit: # TODO: â˜° > Preferences > Font & Colors?
# gedit: https://github.com/altercation/solarized/tree/master/gedit
xed: Edit > Preferences > Theme > Solarized Dark

# Customize apps
gnome-terminal:
  * Edit -> Preferences
    * General
      * Uncheck "Show menubar by default in new terminals"
    * Profile
      * Text:
        * Initial terminal size: 132 * 43
      * Colors:
        * Uncheck "Use colors from system theme"
        * Built-in schemes: "Solarized dark"
        * Palette: "Solarized"
        * Uncheck "Show bold text in bright colors"
      * Command:
        * Check "Run command as a login shell"

#######################
# Misc system settings
#######################

### For Windows dual-boot machines, (store local time instead of UTC)
timedatectl set-local-rtc 1


### For non-Google machine
# sdkman
curl -s "https://get.sdkman.io" | bash
source "$HOME/.sdkman/bin/sdkman-init.sh"
sdk install kotlin
sdk install gradle


### For Haskell/Plutus development:
curl --proto '=https' --tlsv1.2 -sSf https://get-ghcup.haskell.org | sh  # from https://www.haskell.org/ghcup/
curl -L https://nixos.org/nix/install | sh  # from https://nixos.org/download.html
